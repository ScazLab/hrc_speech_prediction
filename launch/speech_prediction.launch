<launch>
    <!-- ARUCO -->
    <include file="$(find human_robot_collaboration)/launch/baxter_aruco.launch" />
    <include file="$(find human_robot_collaboration)/launch/baxter_aruco.launch">
        <arg name="arm" value="right" />
    </include>

    <!-- ROSBRIDGE -->
    <include file="$(find rosbridge_server)/launch/rosbridge_websocket.launch"/>

    <!-- Objects database for the left arm -->
    <rosparam param = "action_provider/objects_left">
        "table_top"     : 200
        "leg_1"         : 150
        "leg_2"         : 151
        "leg_3"         : 152
        "leg_4"         : 153
    </rosparam>

    <!-- Objects database for the right arm -->
    <rosparam param = "action_provider/objects_right">
        "foot"          : 10
        "bracket_front" : 11
        "bracket_back"  : 12
    </rosparam>

    <!-- CONTROL -->
    <!-- If the system should use the robot or not (useful for debugging) -->
    <arg name="useRobot" default="true"/>
    <param name="action_provider/use_robot" value="$(arg useRobot)"/>

    <node pkg="human_robot_collaboration" type="sp_pred_action_provider" name="sp_pred_action_provider" output="screen"/>

    <!-- VISUALIZATION & MISC -->
    <!-- Parameter for speech pop up duration -->
    <param name="baxter_display/speech_duration"        value="16.0"/>

    <node pkg="human_robot_collaboration" type="baxter_display"    name="baxter_display"  output="screen"/>

    <!-- Text to Speech -->
    <!-- <include file="$(find svox_tts)/launch/svox_tts.launch" /> -->

    <!-- Speech to Text -->
    <include file="$(find ros_speech2text)/launch/ros_speech2text.launch"/>

    <!--ROSBAG -->
    <arg name="record" default="true"/>
    <!--  pass this as a commandline arg to launch file e.g
    roslaunch human_robot_collaboration speech_predicition.launch participantID=42069-->
    <arg name="participantID"/>
    <arg name="bag_path" default="/home/$(env USER)/Desktop/speech_prediction_bags/$(arg participantID)/"/>

    <arg name="bag_topics"
         value= "/ros_speech2text/user_output
                 /action_provider/left/state
                 /action_provider/right/state
                 /hsv_detector/objects
                 /aruco_marker_publisher/markers
                 /web_interface/log" />

    <node pkg="data_logger" name="rosbag" type="data_logger" if="$(arg record)">
        <param name="rosbag_record_args" value="--output-prefix=$(arg participantID) $(arg bag_topics)"/>
        <param name="bag_path" value="$(arg bag_path)"/>
    </node>
</launch>
